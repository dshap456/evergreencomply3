"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("@tanstack/react-query"),g=require("@makerkit/data-loader-supabase-core"),d=require("react"),h=require("next/navigation");function i(e){const a=[e.table,e.select??"*",e.where,e.count,e.limit,e.page,e.single,e.sort].filter(Boolean),{data:t,error:n,isLoading:u}=l.useQuery({...e.config??{},queryKey:a,queryFn:()=>g.fetchDataFromSupabase(e)});return t?{data:t.data,count:t.count,error:n,isLoading:u}:{data:e.single?void 0:[],count:0,error:n,isLoading:u}}const r=10;function f(e){const{data:a,count:t,error:n,isLoading:u}=i(e),o=y(),c=e.limit??r,s=Math.ceil(t/(e.limit??r));return e.children({result:{data:a,count:t,pageCount:s,page:e.page??1,pageSize:c},error:n,isLoading:u,onPageChange:o})}function y(){const e=h.useRouter();return d.useCallback(a=>{const t=new URL(window.location.href);t.searchParams.set("page",String(a)),e.push(t.pathname)},[e])}exports.ClientDataLoader=f;exports.useSupabaseQuery=i;
